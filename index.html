<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web Awesome Demo</title>

  <link rel="stylesheet" href="./styles/index.css">
</head>
<body>
  <h1>Web Awesome Component Demo</h1>

  <!-- Icons -->
  <!-- Buttons -->
  <div class="demo-section">
    <div class="component-row">
      <wa-button variant="default"><wa-icon slot="start" name="house" label="Home"></wa-icon>Default</wa-button>
      <wa-button variant="brand">Brand</wa-button>
      <wa-button variant="success">Success</wa-button>
      <wa-button variant="danger">Danger</wa-button>
    </div>
  </div>


  <!-- Dropdown -->
  <div class="demo-section">
      <div class="component-row">
      <wa-dropdown>
        <wa-button slot="trigger" with-caret>Edit</wa-button>

        <div style="padding: 0.5rem 1rem;">
          <label for="dropdown-input" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--wa-color-neutral-700);">Search:</label>
          <wa-input id="dropdown-input" placeholder="Type to search..." size="small"></wa-input>
        </div>
        <wa-divider></wa-divider>

        <wa-dropdown-item value="cut">
          <wa-icon slot="icon" name="scissors"></wa-icon>
          Cut
        </wa-dropdown-item>
        <wa-dropdown-item value="copy">
          <wa-icon slot="icon" name="copy"></wa-icon>
          Copy
        </wa-dropdown-item>
        <wa-dropdown-item value="paste">
          <wa-icon slot="icon" name="paste"></wa-icon>
          Paste
        </wa-dropdown-item>
        <wa-divider></wa-divider>
        <wa-dropdown-item>
          Show images
          <wa-dropdown-item slot="submenu" value="show-all-images">Show All Images</wa-dropdown-item>
          <wa-dropdown-item slot="submenu" value="show-thumbnails">Show Thumbnails</wa-dropdown-item>
        </wa-dropdown-item>
        <wa-divider></wa-divider>
        <wa-dropdown-item type="checkbox" checked value="emoji-shortcuts">Emoji Shortcuts</wa-dropdown-item>
        <wa-dropdown-item type="checkbox" checked value="word-wrap">Word Wrap</wa-dropdown-item>
        <wa-divider></wa-divider>
        <wa-dropdown-item variant="danger" value="delete">
          <wa-icon slot="icon" name="trash"></wa-icon>
          Delete
        </wa-dropdown-item>
      </wa-dropdown>
    </div>
    <div id="dropdown-selection" style="margin-top: 1rem; color: var(--wa-color-neutral-600);"></div>
  </div>

  <!-- Form Controls with Validation -->
  <div class="demo-section">
    <form class="demo-form" id="demo-form">
      <div style="display: grid; gap: 1rem;">
        <!-- Name Input - Required -->
        <wa-input
          name="name"
          label="Name"
          placeholder="Enter your name"
          required
        ></wa-input>

        <!-- Select - Required -->
        <wa-select
          label="Favorite Animal"
          name="animal"
          with-clear
          required
        >
          <wa-option value="birds">Birds</wa-option>
          <wa-option value="cats">Cats</wa-option>
          <wa-option value="dogs">Dogs</wa-option>
          <wa-option value="other">Other</wa-option>
        </wa-select>

        <!-- Checkbox - Required -->
        <wa-checkbox name="agree" required>
          I agree to the terms and conditions
        </wa-checkbox>

        <!-- Form Buttons -->
        <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
          <wa-button type="submit" variant="brand">Submit</wa-button>
          <wa-button type="reset" variant="neutral">Reset</wa-button>
        </div>
      </div>
    </form>
    <div id="form-result" style="margin-top: 1rem; color: var(--wa-color-success-600); font-weight: 500;"></div>
  </div>


  <!-- Initialize Web Awesome -->
  <script type="module">
    // Import the theme CSS
    import '@awesome.me/webawesome/dist/styles/themes/default.css';

    import { setBasePath, registerIconLibrary } from '@awesome.me/webawesome/dist/webawesome.js';

    // Set base path for assets - use CDN or determine dynamically
    // For production, you can use a CDN or configure a proper path
    const basePath = import.meta.env.DEV
      ? '/@awesome.me/webawesome/dist'
      : 'https://cdn.jsdelivr.net/npm/@awesome.me/webawesome@3/dist';

    setBasePath(basePath);

    // Register Font Awesome
    registerIconLibrary('fa', {
      resolver: name => {
        const filename = name.replace(/^fa[rbs]-/, '');
        let folder = 'regular';
        if (name.substring(0, 4) === 'fas-') folder = 'solid';
        if (name.substring(0, 4) === 'fab-') folder = 'brands';
        return `https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/svgs/${folder}/${filename}.svg`;
      },
      mutator: svg => svg.setAttribute('fill', 'currentColor')
    });

    // Import components
    import '@awesome.me/webawesome/dist/components/icon/icon.js';
    import '@awesome.me/webawesome/dist/components/button/button.js';
    import '@awesome.me/webawesome/dist/components/input/input.js';
    import '@awesome.me/webawesome/dist/components/avatar/avatar.js';
    import '@awesome.me/webawesome/dist/components/badge/badge.js';
    import '@awesome.me/webawesome/dist/components/progress-bar/progress-bar.js';
    import '@awesome.me/webawesome/dist/components/dropdown/dropdown.js';
    import '@awesome.me/webawesome/dist/components/divider/divider.js';
    import '@awesome.me/webawesome/dist/components/select/select.js';
    import '@awesome.me/webawesome/dist/components/option/option.js';
    import '@awesome.me/webawesome/dist/components/textarea/textarea.js';
    import '@awesome.me/webawesome/dist/components/checkbox/checkbox.js';

    console.log('✅ Web Awesome loaded');

    // Dropdown event listener
    const dropdown = document.querySelector('wa-dropdown');
    const selectionDisplay = document.getElementById('dropdown-selection');

    dropdown.addEventListener('wa-select', event => {
      const item = event.detail.item;
      const value = item.value || 'no value';
      selectionDisplay.textContent = `Selected: ${value}`;
    });

    // Form validation and submission
    const form = document.getElementById('demo-form');
    const formResult = document.getElementById('form-result');

    // Wait for form controls to be defined before attaching form listeners
    await Promise.all([
      customElements.whenDefined('wa-button'),
      customElements.whenDefined('wa-checkbox'),
      customElements.whenDefined('wa-input'),
      customElements.whenDefined('wa-option'),
      customElements.whenDefined('wa-select'),
      customElements.whenDefined('wa-textarea'),
    ]).then(() => {
      form.addEventListener('submit', event => {
        event.preventDefault();

        // Collect form data
        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());

        formResult.textContent = '✅ Form submitted successfully! Check console for data.';
        formResult.style.color = 'var(--wa-color-success-600)';
        console.log('Form Data:', data);

        // Clear success message after 3 seconds
        setTimeout(() => {
          formResult.textContent = '';
        }, 3000);
      });

      form.addEventListener('reset', () => {
        formResult.textContent = '';
      });
    });

    /*
    If we want to add our own translations, something along the lines of:

import { registerTranslation } from 'path/to/webawesome.js';
import type { Translation } from 'path/to/webawesome.js';

const translation: Translation = {
  $code: 'es',
  $name: 'Español',
  $dir: 'ltr',

  term1: '...',
  term2: '...',
  ...
};

registerTranslation(translation);

export default translation;
*/

  </script>
</body>
</html>
